:github_url: https://github.com/PhantomCybernetics/phntm_bridge_docs/edit/main/ui/built-in-widgets.rst

Built-in Panel Widgets
======================

The following panel widgets are provided out of the box. You can easily :doc:`create custom panel widgets </ui/custom-widgets>`, too.

.. _3d-scene-view-widget:

3D Scene View
-------------
This is a *composite* widget that displays the URDF model from ``/robot_description`` and transforms from ``/tf`` and ``/tf_static``.
Model files are discovered on the robot, uploaded to the Cloud Bridge and cached there. Supported mesh formats are STL and DAE.

The URDF model ca be meshed with additional data from ``sensor_msgs/msg/CameraInfo``, ``vision_msgs/msg/Detection3DArray``, ``sensor_msgs/msg/LaserScan`` and ``sensor_msgs/msg/Range`` topics, as shown on the screenshots below.
See :ref:`CameraInfo <camera-info-config>` and :ref:`Detection3DArray <detection-3d-array-config>` for configuration options.

.. raw:: html

    <!-- Slideshow container -->
    <div id="widget-scene-view" class="slideshow">
        <div class="slideshow-container">

            <div class="mySlides fade">

.. image:: ../img/widget-scene-view-1.gif
   :align: center
   :class: widget-scene-view

.. raw:: html

                <div class="text">[1/3] Laser scan, range detection, colliders, camera frustum</div>
            </div>

            <div class="mySlides fade">
            
.. image:: ../img/widget-scene-view-2.gif
   :align: center
   :class: widget-scene-view

.. raw:: html

                <div class="text">[2/3] Transforms + camera frustum</div>
            </div>

            <div class="mySlides fade">
            
.. image:: ../img/widget-scene-view-3.gif
   :align: center
   :class: widget-scene-view

.. raw:: html

                <div class="text">[3/3] Spatial detections</div>
            </div>

            <!-- Next and previous buttons -->
            <a class="prev" onclick="plusSlides(-1, 'widget-scene-view')">&#10094;</a>
            <a class="next" onclick="plusSlides(1, 'widget-scene-view')">&#10095;</a>
        </div>
        <div class="slideshow-container-dots">
            <span class="dot" onclick="currentSlide(1, 'widget-scene-view')"></span>
            <span class="dot" onclick="currentSlide(2, 'widget-scene-view')"></span>
            <span class="dot" onclick="currentSlide(3, 'widget-scene-view')"></span>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            window.slideIndex = { 'widget-scene-view': 1 };
            showSlides('widget-scene-view');
        });
    </script>

The URDF model only updates when /robot_description changes, or on page reload. Call the ``/phntm_bridge/clear_cloud_file_cache`` service to invalidate the model cache on Cloud Bridge, then reload the page.
(More features will be added to this widget, such as support for interactive `visualization markers <https://github.com/PhantomCybernetics/bridge_ui/issues/7>`_ and `path planning <https://github.com/PhantomCybernetics/bridge_ui/issues/10>`_)

.. _battery-state-widget:

Battery State
-------------
This panel displays robot's battery voltage from ``sensor_msgs/msg/BatteryState`` topics as a graph.
See :ref:`BatteryState <battery-state-config>` for configuration options.

.. image:: ../img/widget-battery.gif
    :align: center
    :class: widget-battery

(Battery State `will display current <https://github.com/PhantomCybernetics/bridge_ui/issues/3>`_, too.)

Imu
---
This panel displays IMU data of ``sensor_msgs/msg/Imu`` topics as rotation, linear acceleration and angular velocity.

.. image:: ../img/widget-imu.gif
    :align: center
    :class: widget-imu

Laser Scan
----------
Displays 2D image of of a lidar scan for ``sensor_msgs/msg/LaserScan`` topics. You can zoom in and out and rotate the display.

.. image:: ../img/widget-laser.gif
    :align: center
    :class: widget-laser

Log
---
Displays system logs such as ``/rosout`` for ``rcl_interfaces/msg/Log`` topics.

.. image:: ../img/widget-log.gif
    :align: center
    :class: widget-log

Range
-----
Shows distance information from ``sensor_msgs/msg/Range`` as a number and color.

.. image:: ../img/widget-range.gif
    :align: center
    :class: widget-range

System Info
-----------
This panel displays system CPU load, memory and swap utilization, and free space for monitored disk volumes.
The info is generated by Phantom Agent via the ``phntm_interfaces/msg/SystemInfo`` topics.
See :doc:`Agent Configuration </basics/bridge-agent-config>` for available options.

.. image:: ../img/widget-system-info.gif
    :align: center
    :class: widget-system-info

.. _video-widget:

Video
-----
This is the default widget for any Video and Image topics, transmitted as H.264.
It allows to display overlay data from ``vision_msgs/msg/Detection2DArray`` topics.
See :ref:`Detection2DArray <detection-2d-array-config>` and :ref:`Image <image-config>` for config options.

[GIF]